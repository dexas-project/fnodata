!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):t.Notify=o()}(this,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,o){var i={};for(var e in t)o.indexOf(e)>=0||Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e]);return i},i=window.Notification;function e(t){return"function"==typeof t}function n(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof i)throw new Error("Notify(): first arg (title) must be a string.");if("object"!==(void 0===n?"undefined":t(n)))throw new Error("Notify(): second arg (options) must be an object.");var s=n.notifyShow,r=void 0===s?null:s,c=n.notifyClose,l=void 0===c?null:c,f=n.notifyClick,a=void 0===f?null:f,h=n.notifyError,y=void 0===h?null:h,u=n.closeOnClick,d=void 0!==u&&u,m=n.timeout,p=void 0===m?null:m,b=o(n,["notifyShow","notifyClose","notifyClick","notifyError","closeOnClick","timeout"]);this.title=i,this.options=b,this.permission=null,this.closeOnClick=d,this.timeout=p,e(r)&&(this.onShowCallback=r),e(l)&&(this.onCloseCallback=l),e(a)&&(this.onClickCallback=a),e(y)&&(this.onErrorCallback=y)}return n.isSupported=function(t){if(!i||!i.requestPermission)return!1;if("granted"===t||"granted"===i.permission)throw new Error("You must only call this before calling Notification.requestPermission(), otherwise this feature detect would trigger an actual notification!");try{new i("")}catch(t){if("TypeError"===t.name)return!1}return!0},n.needsPermission=!i||!i.permission||"granted"!==i.permission,n.requestPermission=function(t,o){i.requestPermission(function(i){switch(i){case"granted":n.needsPermission=!1,e(t)&&t();break;case"denied":n.needsPermission=!0,e(o)&&o()}})},n.prototype.show=function(){this.myNotify=new i(this.title,this.options),this.options.requireInteraction||!this.timeout||isNaN(this.timeout)||setTimeout(this.close.bind(this),1e3*this.timeout),this.myNotify.addEventListener("show",this,!1),this.myNotify.addEventListener("error",this,!1),this.myNotify.addEventListener("close",this,!1),this.myNotify.addEventListener("click",this,!1)},n.prototype.onShowNotification=function(t){this.onShowCallback&&this.onShowCallback(t)},n.prototype.onCloseNotification=function(t){this.onCloseCallback&&this.onCloseCallback(t),this.destroy()},n.prototype.onClickNotification=function(t){this.onClickCallback&&this.onClickCallback(t),this.closeOnClick&&this.close()},n.prototype.onErrorNotification=function(t){this.onErrorCallback&&this.onErrorCallback(t),this.destroy()},n.prototype.destroy=function(){this.myNotify.removeEventListener("show",this,!1),this.myNotify.removeEventListener("error",this,!1),this.myNotify.removeEventListener("close",this,!1),this.myNotify.removeEventListener("click",this,!1)},n.prototype.close=function(){this.myNotify.close()},n.prototype.handleEvent=function(t){switch(t.type){case"show":this.onShowNotification(t);break;case"close":this.onCloseNotification(t);break;case"click":this.onClickNotification(t);break;case"error":this.onErrorNotification(t)}},n});